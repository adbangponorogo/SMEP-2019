<div class="col-md-12">
    <div class="box box-primary">
      <div class="box-header with-border" style="padding: 10px 0px;">
        <div class="col-md-12" style="padding-top: 5px;">
          <h3 class="box-title">Diagram Content</h3>
          <div class="box-tools pull-right">
			<button type="button" class="btn btn-box-tool" data-widget="collapse">
				<i class="fa fa-plus"></i>
			</button>
		  </div>
        </div>
      </div>
      <div class="box-body">
      	<div class="col-md-12">
      		<div class="col-md-12" style="margin-bottom: 10px;">
	          <div class="col-md-3">
	              <div class="form-group" style="margin:10px 0px;">
	                <b>SKPD</b>
	              </div>
	          </div>
	          <div class="col-md-9" style="padding-top: 2.5px;">
	            <div class="form-group">
                    <select class="form-control laportepra-perencanaan-skpd" style="width: 100%;"></select>
                </div>
	          </div>
	        </div>
      	</div>
      	<div class="col-md-12">
      		<div class="col-md-12" style="margin-bottom: 10px;">
	          <div class="col-md-3">
	              <div class="form-group" style="margin:10px 0px;">
	                <b>Rencana Pencairan</b>
	              </div>
	          </div>
	          <div class="col-md-9" style="padding-top: 2.5px;">
	            <div class="form-group">
	            	<select class="form-control laportepra-perencanaan-rencana-pencairan"></select>
	            </div>
	          </div>
	        </div>
      	</div>
        <div class="col-md-12 laportepra-perencanaan-diagram-tree" style="display: block;">
        	<div class="table-responsive">
	        	<table class="table" width="100%" cellspacing="0" style="text-align: center;">
					<tr>
						<td colspan="16" class="bg-light-blue-active color-palette"><b>Belanja Daerah</b><br><b class="laportepra-perencanaan-total-bl" style="font-weight: normal;"></b></td>
					</tr>
					<tr>
						<td colspan="4" style="border:none;border-right: 1px solid #00a7d0;padding: 15px;"></td><td colspan="4" style="border:none;border-left: 1px solid #00a7d0;padding: 15px;"></td>
						<td colspan="4" style="border:none;border-right: 1px solid #00a7d0;padding: 15px;"></td><td colspan="4" style="border:none;border-left: 1px solid #00a7d0;padding: 15px;"></td>
					</tr>
					<tr>
						<td colspan="8" class="bg-aqua-active color-palette" style="border-right: 1px solid #fff;"><b>Belanja Tidak Langsung</b><br><b class="laportepra-perencanaan-btl" style="font-weight: normal;"></b></td>
						<td colspan="8" class="bg-aqua-active color-palette" style="border-left:1px solid #fff;"><b>Belanja Langsung</b><br><b class="laportepra-perencanaan-bl" style="font-weight: normal;"></b></td>
					</tr>
					<tr>
						<td colspan="2" style="border:none;border-right: 1px solid #605ca8;padding: 15px;"></td><td colspan="2" style="border:none;border-left: 1px solid #605ca8;padding: 15px;"></td>
						<td colspan="2" style="border:none;border-right: 1px solid #605ca8;padding: 15px;"></td><td colspan="2" style="border:none;border-left: 1px solid #605ca8;padding: 15px;"></td>
						<td colspan="2" style="border:none;border-right: 1px solid #605ca8;padding: 15px;"></td><td colspan="2" style="border:none;border-left: 1px solid #605ca8;padding: 15px;"></td>
						<td colspan="2" style="border:none;border-right: 1px solid #605ca8;padding: 15px;"></td><td colspan="2" style="border:none;border-left: 1px solid #605ca8;padding: 15px;"></td>
					</tr>
					<tr>
						<td colspan="4" class="bg-purple-active color-palette" style="border-right: 1px solid #fff;"><b>Pegawai</b><br><b class="laportepra-perencanaan-btl1" style="font-weight: normal;"></b></td>
						<td colspan="4" class="bg-purple color-palette" style="border-left: 1px solid #fff; border-right: 1px solid #fff;"><b>Non-Pegawai</b><br><b class="laportepra-perencanaan-btl2" style="font-weight: normal;"></b></td>
						<td colspan="4" class="bg-purple-active color-palette" style="border-left: 1px solid #fff; border-right: 1px solid #fff;"><b>Pegawai</b><br><b class="laportepra-perencanaan-bl1" style="font-weight: normal;"></b></td>
						<td colspan="4" class="bg-purple color-palette" style="border-left: 1px solid #fff;"><b>Non-Pegawai</b><br><b class="laportepra-perencanaan-bl2" style="font-weight: normal;"></b></td>
					</tr>
					<tr>
						<td></td><td></td>
						<td></td><td></td>
						<td></td><td></td>
						<td></td><td></td>
						<td></td><td></td>
						<td></td><td></td>
						<td style="border:none;border-right: 1px solid #30bbbb;padding: 15px;"></td><td style="border:none;border-left: 1px solid #30bbbb;padding: 15px;"></td>
						<td style="border:none;border-right: 1px solid #30bbbb;padding: 15px;"></td><td style="border:none;border-left: 1px solid #30bbbb;padding: 15px;"></td>
					</tr>
					<tr>
						<td colspan="2"></td>
						<td colspan="2"></td>
						<td colspan="2"></td>
						<td colspan="2"></td>
						<td colspan="2"></td>
						<td colspan="2"></td>
						<td colspan="2" class="bg-teal-active color-palette" style="border-left: 1px solid #fff; border-right: 1px solid #fff;"><b>Barang/Jasa</b><br><b class="laportepra-perencanaan-bj" style="font-weight: normal;"></b></td>
						<td colspan="2" class="bg-teal color-palette" style="border-left: 1px solid #fff;"><b>Modal</b><br><b class="laportepra-perencanaan-md" style="font-weight: normal;"></b></td>
					</tr>
				</table>
	        </div>
        </div>
      </div>
    </div>
</div>

<!-- Javascript -->
<script type="text/javascript">
  	// ----------------- Rencana Perencanaan ---------------
  	laporTepraPerencanaanRencanaData();
    function laporTepraPerencanaanRencanaData(){
      var JSON_DATA = [
            [1, "01 - E-Purchasing"],
            [2, "02 - Tender"],
            [3, "03 - Tender Cepat"],
            [4, "04 - Pengadaan Langsung"],
            [5, "05 - Penunjukkan Langsung"],
            [6, "06 - Seleksi"],
          ];
      var option = "<option value='all'>:: Rekapitulasi ::</option>";
      for (var kategori = 0; kategori < JSON_DATA.length; kategori++) {
        option += "<option value='"+JSON_DATA[kategori][0]+"'>"+JSON_DATA[kategori][1]+"</option>";
      }
      jQuery(".laportepra-perencanaan-rencana-pencairan").html(option);
      jQuery(".laportepra-perencanaan-rencana-pencairan").val("all").change();
        jQuery(".laportepra-perencanaan-rencana-pencairan").select2();
    }


  	// --------------- SKPD option dan Value --------------- //
    laporTepraPerencanaanSKPDData();
    function laporTepraPerencanaanSKPDData(){
        jQuery.ajax({
          type      : 'AJAX',
          method    : 'GET',
          url       : 'laporan/tepra/perencanaan/skpd/all/'+jQuery(".smep-skpd-main").val(),
          async     : true,
          dataType  : 'JSON',
          success   : function(JSON){
                if (JSON[0][0] == 1) {
                    var option = "<option value='all'>:: Semua SKPD ::</option>";
                    for (var skpd = 0; skpd < JSON.length; skpd++) {
                        option += "<option value='"+JSON[skpd][1]+"'>"+JSON[skpd][2]+"</option>";
                    }
                    jQuery(".laportepra-perencanaan-skpd").html(option);
                    jQuery(".laportepra-perencanaan-skpd").val("all").change();
                }
                else{
                    var option = "";
                    for (var skpd = 0; skpd < JSON.length; skpd++) {
                        option += "<option value='"+JSON[skpd][1]+"'>"+JSON[skpd][2]+"</option>";
                    }
                    jQuery(".laportepra-perencanaan-skpd").html(option);
                    jQuery(".laportepra-perencanaan-skpd").val(JSON[0][1]).change();
                }
                jQuery(".laportepra-perencanaan-skpd").select2();
                laporTepraPerencanaanRencanaData();
          },
          error     : function(jqXHR, textStatus, errorThrown){
            location.href = window.location.href+"app/auth/sessionPage";
          }
        });
    }

    jQuery(document).on("change", ".laportepra-perencanaan-skpd", function(){
    	laporTepraPerencanaanDiagramData(jQuery(this).val());
    	laporTepraPerencanaanRekap(jQuery(this).val());
    	jQuery(".laportepra-perencanaan-idskpd").val(jQuery(this).val());
    });

    jQuery(document).on("change", ".laportepra-perencanaan-rencana-pencairan", function(){
    	if (jQuery(this).val() == "all") {

    		// ----- Rekap -----
    		
    		jQuery(".rekap-box").removeClass("hidden-show");
    		jQuery(".rekap-box").removeClass("visible-show");
    		jQuery(".rekap-box").addClass("visible-show");

    		// ----- Paket -----

    		jQuery(".paket-box").removeClass("hidden-show");
    		jQuery(".paket-box").removeClass("visible-show");
    		jQuery(".paket-box").addClass("hidden-show");
    	}
    	else{
    		
    		// ----- Rekap -----

    		jQuery(".rekap-box").removeClass("hidden-show");
    		jQuery(".rekap-box").removeClass("visible-show");
    		jQuery(".rekap-box").addClass("hidden-show");

    		// ----- Paket -----

    		jQuery(".paket-box").removeClass("hidden-show");
    		jQuery(".paket-box").removeClass("visible-show");
    		jQuery(".paket-box").addClass("visible-show");
    	}
    });

    
    function laporTepraPerencanaanDiagramData(id_skpd){
    	jQuery.ajax({
          type      : 'AJAX',
          method    : 'GET',
          url       : 'laporan/tepra/perencanaan/dana/'+id_skpd,
          async     : true,
          dataType  : 'JSON',
          success   : function(JSON){
          	jQuery(".laportepra-perencanaan-total-bl").html(JSON[0]);
          	jQuery(".laportepra-perencanaan-btl").html(JSON[1]);
          	jQuery(".laportepra-perencanaan-bl").html(JSON[2]);
          	jQuery(".laportepra-perencanaan-btl1").html(JSON[3]);
          	jQuery(".laportepra-perencanaan-btl2").html(JSON[4]);
          	jQuery(".laportepra-perencanaan-bl1").html(JSON[5]);
          	jQuery(".laportepra-perencanaan-bl2").html(JSON[6]);
          	jQuery(".laportepra-perencanaan-bj").html(JSON[8]+"<br><i>"+JSON[7]+" Paket</i>");
          	jQuery(".laportepra-perencanaan-md").html(JSON[10]+"<br><i>"+JSON[9]+" Paket</i>");
          },
          error     : function(jqXHR, textStatus, errorThrown){
            // location.href = window.location.href+"app/auth/sessionPage";
          }
        });
    }
</script>